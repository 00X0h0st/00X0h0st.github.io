---
layout:     post
title:      "历时25天，我的博客（www.ityouknow.com）终于又活了过来"
no-post-nav: true
category: life
tags: [life]
excerpt: 说起我的博客那是一个故事
---

时间回到2016年的7月10号，那时候我刚刚开始正式在博客园写博客，博客园的氛围交流氛围很好，但鉴于博客园古老的界面对我来讲总是不太能忍，就一直在寻找一个漂亮的皮肤，同时也打算创建一个自己独立的博客，毕竟自己的博客怎么折腾都行。

那时候正在研究 Spring Boot ,正式开源项目[云收藏](https://github.com/cloudfavorites/favorites-web)的启动阶段，在网上找 Gradle 的使用方法，在 Github 上发现一个比较好的学习资源：[Gradle User Guide 中文版](https://github.com/DONGChuan/GradleUserGuide)，看完之后随意查看了一下作者的 Github 主页，发现有一个 Jekyll 主题的开源项目 [Yummy Jekyll Theme](https://github.com/DONGChuan/Yummy-Jekyll)。

通过这个链接我打开了作者的博客，发现这个博客主题简洁、大方，整体淡蓝色的风格深受我的喜欢。下图是它最初的模样：

![](http://www.ityouknow.com/assets/images/2018/life/yummy.png)

后面我根据自己的情况，做了一些定制，就成了现在的样子：

![](http://www.ityouknow.com/assets/images/2018/life/ityouknow.png)


其实我刚开始接触 Jekyll 的时候对它并不是很了解，Markdown 语法也只是停留在听说的这个阶段，看多这个主题后我花了一点时间，尝试着按照它的语法写了第一篇文章，发现有一种用代码的方式去写文章的感觉，文章渲染之后的效果也很好。掌握了这个技能之后，我的写作利器就成了 Sublime text 3 + Markdown 组件 + Github + Jekyll。

就这样我就开启了我个人博客之旅，刚刚开始几乎没有什么流量，每天就几个人访问，到了后来慢慢多了起来，一天几百人访问到几千人访问。后来又给博客添加了流量统计，发现很多流量都是通过谷歌过来的，百度搜索流量为0。网站查了一下这个事情的因为：早些年百度还是可以爬取 Github 上面的内容，但是由于百度的爬虫太猛还是什么原因，让 Github 的网站总处于不文档的状态，于是 Github 就把百度给屏蔽了。

在中国绝大部分的用户都是用的是百度，因此就白白损失了一大部分流量，网上有很多的解决方案，比如生产两份根据域名解析选择走国内还是国外，后者直接是用 Coding.net 来托管博客，但 Coding.net 托管的博客总是有它自己三秒广告，让人很恶心。其它方案也都很复杂，后来就放弃了。

在使用一年多后的一天也就是2017年的8月，突然提交的新文章都会报编译错误，我自己花了很多时间去找原因，甚至去V2ex求助，给主题作者发邮件都无果，后来尝试着给 Github 官方发了几封邮件，才明白可能是 Github Page 升级了相关组件包，导致提交的版本不兼容导致编译出错，最终折腾了一番终于解决了这问题，具体解决的过程我还写了一篇文章：[千里追踪博客之殇](http://www.ityouknow.com/other/2017/09/10/blog-stop-a-month.html)。

经历过这个事情之后，我就想万一以后 Github Pages 以后再升级组件，我是不是又会面临这样的问题。加上 GitHub Pages 又不能被百度搜索引擎抓取，于是我想换一种思路来解决这样的问题，Jekyll 是静态博客最终给大家访问的页面都是生成的静态Html，也是我就想可以在本地将 Jekyll 编译成 Html 文件，手动上传到服务器的 nginx 下面不就行了。

说干就干，在本机折腾了两天终于搭建好了环境，使用 Jekyll 命令可以在本机新建、预览、编译博客，非常方便。恰好我再国外有一个云主机，就找时间在上面部署了一个 Nginx 在加上缓存什么的设置，就将打包好的静态页面上传了上去，域名指向重新做了设置，访问了一下妥妥的。这样虽然稍显麻烦，但解决了百度搜索引擎和 Github Page 组件升级的问题。切换之后没过多久，博客的日均访问量到了1.5W左右。

博客托管到国外的云主机之后，每次写完博客在本机电脑打包成html，再压缩上传到云主机，在登录到云主机上面讲压缩包解压覆盖，这样就是写博客的流程。虽然比起以前复杂了很多，但是总是是流量多了一些也忍了。知道前一个多月的时候，发生了两件事情，促使我决定一定要把博客搬回到国内。

有一天在上班，突然群里有个小伙伴说，你的博客怎么访问的时候那么慢，有需要需要5分钟才能打开页面，我说可能是你们那边网络的问题吧，也没太在意，过了两天不断有人给我说这个事情，我才意识到应该不是局部网络的问题。

打开浏览器的调试解决跟踪了一下慢的原因，发现使用国内公共 CDN 的 js、css 需要一分钟还多， 继续跟踪发现只要是国内的资源记载起来都非常的慢，想起这两天的 Vpn 也不稳定，才明白开会期间可能对网络采取了管制，导致部分资源受限，于是改了下资源都从本地读取后，博客的访问速度回复到了正常。

过了几天北京这边又开一个更大的会，有几天的时间我的博客直接就不能访问了。看来只要北京开会，我的博客肯定就会出现不稳定的情况，原因就是因为我使用了国外的云主机。另外想给网站加一些功能的是，比如QQ登录什么的，都有一个前提条件必须有备案。恰哈腾讯云那几天在做活动，就买了一个云主机，准备将博客从国外搬家回国内，没想到又掉进了另外一个坑。

备案需要25天！

![](http://www.ityouknow.com/assets/images/2018/life/beian.png)

我在5月11号在腾讯云提交的备案请求，因为需要调表、照相花费了大概一周的时间，将所有的资料都初审完成之后，腾讯云的客服通知我说，备案的网站必须关闭，不然有可能备案不通过，没办法那段时间只能讲域名解析给关闭掉，同时将博客链接到：[www.mooooc.com](http://www.mooooc.com/)，在备案的期间，天天有很多的网站给我留言、发邮件或者微信、QQ沟通说是不是我的博客挂掉了，每天给大家都解释真的快累坏了。

眼看着一周过去了，两周过去了备案还是没有下来，我隔两天就登录系统看下情况。终于在6月4号下午收到了备案通过的通知：

![](http://www.ityouknow.com/assets/images/2018/life/beian2.png)

其实我到现在都想不通，就那么一点点信息，为什么备案需要20个工作日，效率低的让人崩溃。

在备案的同时，我在 github 也搭建了 Jekyll 、git 环境，同时写了一个简单的脚步，执行脚步会自动从 Github 拉取提交的增量代码并打包到 Nginx 的目录下，同时利用 linux 的 crontab 做了一个小定时，每天晚上定时同步一次，这样以后发布文章就简单了，我只需要将代码提交到 Github 上面，剩下的工作就让定时去发布了。

另外如果你想了解如何去写博客，可以参考这篇文章：[技术博客那些事儿](http://www.ityouknow.com/other/2017/07/16/operating-technology-blog.html)
























